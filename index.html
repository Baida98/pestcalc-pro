<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#4a63e7" />
  <title>PestCalc Pro</title>
  <style>
    :root {
      --primary: #4a63e7;
      --primary-dark: #3a4dc7;
      --secondary: #667eea;
      --light: #f5f7ff;
      --dark: #333;
      --success: #2ecc71;
      --error: #e74c3c;
      --warning: #f39c12;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--light);
      color: var(--dark);
      line-height: 1.6;
      padding: 15px;
      background-image: linear-gradient(135deg, #f5f7ff 0%, #e6e9ff 100%);
    }
    
    .app-container {
      max-width: 650px;
      margin: 0 auto;
      padding-bottom: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 25px 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      background-image: linear-gradient(to right, #f8f9ff, #ffffff);
      border-left: 5px solid var(--primary);
    }
    
    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .logo-icon {
      width: 50px;
      height: 50px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(74, 99, 231, 0.3);
    }
    
    h1 {
      color: var(--primary);
      font-size: 2.2rem;
      margin-bottom: 5px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .tagline {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 20px;
    }
    
    section {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease;
    }
    
    section:hover {
      transform: translateY(-5px);
    }
    
    section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      height: 4px;
      width: 100%;
      background: var(--primary);
    }
    
    h2 {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.4rem;
      margin-bottom: 20px;
      color: var(--primary);
    }
    
    h2 i {
      font-size: 1.6rem;
    }
    
    .input-group {
      margin-bottom: 20px;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #444;
      font-size: 0.95rem;
    }
    
    input {
      width: 100%;
      padding: 14px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      background: #fafbff;
      transition: all 0.3s;
    }
    
    input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(74, 99, 231, 0.2);
    }
    
    button {
      background: var(--primary);
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 15px 25px;
      cursor: pointer;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s;
      width: 100%;
      box-shadow: 0 4px 6px rgba(74, 99, 231, 0.3);
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 10px rgba(74, 99, 231, 0.4);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: 0.5s;
    }
    
    button:hover::after {
      left: 100%;
    }
    
    .output {
      margin-top: 20px;
      padding: 18px;
      border-radius: 10px;
      font-weight: 500;
      white-space: pre-line;
      background: #f0f4ff;
      border-left: 4px solid var(--primary);
      animation: fadeIn 0.5s ease;
    }
    
    .success {
      background: #e8f5e9;
      color: #2e7d32;
      border-left-color: #2e7d32;
    }
    
    .error {
      background: #ffebee;
      color: #c62828;
      border-left-color: #c62828;
    }
    
    .warning {
      background: #fff8e1;
      color: #f57f17;
      border-left-color: #f57f17;
    }
    
    footer {
      text-align: center;
      font-size: 0.9em;
      color: #666;
      margin-top: 30px;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .disclaimer {
      font-size: 0.8em;
      color: #999;
      margin-top: 10px;
      font-style: italic;
    }
    
    footer a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
    }
    
    footer a:hover {
      text-decoration: underline;
    }
    
    .section-icon {
      background: var(--primary);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 20px;
      background: #f0f4ff;
      border-radius: 50px;
      padding: 5px;
    }
    
    .tab {
      flex: 1;
      text-align: center;
      padding: 12px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
    }
    
    .tab.active {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 6px rgba(74, 99, 231, 0.3);
    }
    
    .calculator-content {
      display: none;
    }
    
    .calculator-content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    .product-row {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .product-row .input-group {
      flex: 1;
      margin-bottom: 0;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @media (max-width: 600px) {
      .app-container {
        padding: 10px;
      }
      
      header, section {
        padding: 20px 15px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .product-row {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <div class="logo">
        <div class="logo-icon">PC</div>
      </div>
      <h1>PestCalc Pro</h1>
      <p class="tagline">Calcolatore professionale per disinfestatori</p>
    </header>

    <section id="diluizione">
      <h2><div class="section-icon">üíß</div> Calcolo Diluizione</h2>
      <div class="input-group">
        <label for="concentrazione">Concentrazione principio attivo (%)</label>
        <input type="number" id="concentrazione" min="0.1" max="100" step="0.1" placeholder="Es: 5.5" />
      </div>
      <div class="input-group">
        <label for="volume">Volume soluzione finale (ml)</label>
        <input type="number" id="volume" min="100" step="100" placeholder="Es: 1000" />
      </div>
      <button onclick="calcolaDiluizione()">Calcola</button>
      <div id="output-diluizione" class="output"></div>
    </section>

    <section id="saturazione">
      <h2><div class="section-icon">üè†</div> Saturazione Ambientale</h2>
      <div class="input-group">
        <label for="mq">Metri quadri da trattare</label>
        <input type="number" id="mq" min="1" step="1" placeholder="Es: 50" />
      </div>
      <div class="input-group">
        <label for="dose">Dose di prodotto (ml/m¬≤)</label>
        <input type="number" id="dose" min="1" step="1" placeholder="Es: 20" />
      </div>
      <button onclick="calcolaSaturazione()">Calcola</button>
      <div id="output-saturazione" class="output"></div>
    </section>

    <section id="fumigazione">
      <h2><div class="section-icon">‚òÅÔ∏è</div> Fumigazione</h2>
      <div class="input-group">
        <label for="mc">Volume ambiente (m¬≥)</label>
        <input type="number" id="mc" min="1" step="1" placeholder="Es: 100" />
      </div>
      <div class="input-group">
        <label for="dose-fumo">Dose fumigante (ml/m¬≥)</label>
        <input type="number" id="dose-fumo" min="1" step="1" placeholder="Es: 10" />
      </div>
      <button onclick="calcolaFumigazione()">Calcola</button>
      <div id="output-fumigazione" class="output"></div>
    </section>

    <section id="costi">
      <h2><div class="section-icon">üí∞</div> Calcolo Costi</h2>
      <div class="tabs">
        <div class="tab active" data-tab="costi-prodotto">Costo Prodotto</div>
        <div class="tab" data-tab="costi-completo">Costo Completo</div>
      </div>
      
      <div id="costi-prodotto" class="calculator-content active">
        <div class="input-group">
          <label for="prezzo">Prezzo per litro (‚Ç¨)</label>
          <input type="number" id="prezzo" min="0" step="0.01" placeholder="Es: 25.00" />
        </div>
        <div class="input-group">
          <label for="mlusati">ml usati</label>
          <input type="number" id="mlusati" min="1" step="1" placeholder="Es: 500" />
        </div>
        <button onclick="calcolaCosti()">Calcola</button>
      </div>
      
      <div id="costi-completo" class="calculator-content">
        <div class="input-group">
          <label for="prezzo-completo">Prezzo per litro (‚Ç¨)</label>
          <input type="number" id="prezzo-completo" min="0" step="0.01" placeholder="Es: 25.00" />
        </div>
        <div class="input-group">
          <label for="mlusati-completo">ml usati</label>
          <input type="number" id="mlusati-completo" min="1" step="1" placeholder="Es: 500" />
        </div>
        <div class="input-group">
          <label for="manodopera">Costo manodopera (‚Ç¨/ora)</label>
          <input type="number" id="manodopera" min="0" step="1" placeholder="Es: 30" />
        </div>
        <div class="input-group">
          <label for="tempo">Tempo stimato (ore)</label>
          <input type="number" id="tempo" min="0.1" step="0.1" placeholder="Es: 1.5" />
        </div>
        <button onclick="calcolaCostiCompleti()">Calcola</button>
      </div>
      
      <div id="output-costi" class="output"></div>
    </section>

    <section id="prodotti">
      <h2><div class="section-icon">üß™</div> Gestione Prodotti</h2>
      <div class="input-group">
        <label for="nome-prodotto">Nome Prodotto</label>
        <input type="text" id="nome-prodotto" placeholder="Es: InsectStop X200" />
      </div>
      <div class="product-row">
        <div class="input-group">
          <label for="concentrazione-prodotto">Conc. PA (%)</label>
          <input type="number" id="concentrazione-prodotto" min="0.1" max="100" step="0.1" placeholder="Es: 5.5" />
        </div>
        <div class="input-group">
          <label for="prezzo-prodotto">Prezzo al litro (‚Ç¨)</label>
          <input type="number" id="prezzo-prodotto" min="0.01" step="0.01" placeholder="Es: 25.99" />
        </div>
      </div>
      <div class="product-row">
        <div class="input-group">
          <label for="tempo-azione">Tempo azione (ore)</label>
          <input type="number" id="tempo-azione" min="0.1" step="0.1" placeholder="Es: 4" />
        </div>
        <div class="input-group">
          <label for="tipo-prodotto">Tipo prodotto</label>
          <select id="tipo-prodotto" style="width:100%;padding:14px;border:1px solid #ddd;border-radius:10px;background:#fafbff;">
            <option value="">Seleziona tipo</option>
            <option value="insetticida">Insetticida</option>
            <option value="rodenticida">Rodenticida</option>
            <option value="fumigante">Fumigante</option>
            <option value="repellente">Repellente</option>
            <option value="disinfettante">Disinfettante</option>
          </select>
        </div>
      </div>
      <button onclick="aggiungiProdotto()">Salva Prodotto</button>
      <div id="output-prodotto" class="output"></div>
    </section>

    <footer>
      <p>¬© 2025 PestCalc Pro | Versione 3.0 | Licenza: <a href="LICENSE.md" target="_blank">Visualizza</a></p>
      <p class="disclaimer">I risultati sono indicativi. Verificare sempre le schede tecniche dei prodotti.</p>
      <p class="disclaimer">Dominio verificato: baida98.github.io</p>
    </footer>
  </div>
  
  <script>
    // ========== SISTEMA DI PROTEZIONE PER IL TUO DOMINIO ========== //
    (function() {
      // Verifica dominio
      const dominioConsentito = 'baida98.github.io';
      if (window.location.hostname !== dominioConsentito && 
          window.location.hostname !== 'localhost' && 
          window.location.hostname !== '127.0.0.1') {
        document.body.innerHTML = `
          <div style="text-align:center; padding:50px 20px; font-family:sans-serif;">
            <h1 style="color:#e74c3c; margin-bottom:20px;">Accesso non autorizzato</h1>
            <p>Questa applicazione √® accessibile solo dal dominio: <strong>${dominioConsentito}</strong></p>
            <p>Il tuo dominio attuale: <strong>${window.location.hostname}</strong></p>
          </div>
        `;
        throw new Error('Accesso non autorizzato');
      }
      
      // Avviso di copyright in console
      console.log('%c‚ö†Ô∏è PestCalc Pro - Versione 3.0 ‚ö†Ô∏è', 'font-size:16px; color:#e74c3c;');
      console.log('%cQuesto software √® protetto da copyright. Qualsiasi uso non autorizzato √® vietato.', 'font-size:14px; color:#333;');
      console.log('%cLicenza: https://github.com/baida98/pestcalc-pro/blob/main/LICENSE.md', 'font-size:14px; color:#3498db;');
    })();
    
    // ========== FUNZIONI DI VALIDAZIONE ========== //
    function validaInput(valore, min, max, nome) {
      if (isNaN(valore) {
        return { valido: false, messaggio: `Inserire un valore numerico per ${nome}` };
      }
      if (valore < min) {
        return { valido: false, messaggio: `${nome} non pu√≤ essere inferiore a ${min}` };
      }
      if (max && valore > max) {
        return { valido: false, messaggio: `${nome} non pu√≤ superare ${max}` };
      }
      return { valido: true };
    }
    
    // ========== FUNZIONI DI CALCOLO ========== //
    function calcolaDiluizione() {
      const output = document.getElementById('output-diluizione');
      output.className = 'output';
      
      const concentrazione = parseFloat(document.getElementById('concentrazione').value);
      const volume = parseFloat(document.getElementById('volume').value);
      
      // Validazione
      const validConc = validaInput(concentrazione, 0.1, 100, 'la concentrazione');
      if (!validConc.valido) {
        output.textContent = validConc.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validVolume = validaInput(volume, 10, 10000, 'il volume');
      if (!validVolume.valido) {
        output.textContent = validVolume.messaggio;
        output.classList.add('error');
        return;
      }
      
      // Calcolo
      const mlPrincipioAttivo = (concentrazione / 100) * volume;
      const mlSolvente = volume - mlPrincipioAttivo;
      
      // Risultato formattato
      let result = `üîπ ${mlPrincipioAttivo.toFixed(1)} ml di principio attivo (${concentrazione}%)`;
      result += `\nüîπ ${mlSolvente.toFixed(1)} ml di solvente`;
      result += `\nüîπ Totale: ${volume.toFixed(1)} ml di soluzione`;
      
      if (volume >= 1000) {
        result += ` (${(volume/1000).toFixed(2)} L)`;
      }
      
      output.textContent = result;
      output.classList.add('success');
      
      // Salva input
      salvaInput('concentrazione', concentrazione);
      salvaInput('volume', volume);
    }

    function calcolaSaturazione() {
      const output = document.getElementById('output-saturazione');
      output.className = 'output';
      
      const mq = parseFloat(document.getElementById('mq').value);
      const dose = parseFloat(document.getElementById('dose').value);
      
      // Validazione
      const validArea = validaInput(mq, 1, 10000, 'i metri quadri');
      if (!validArea.valido) {
        output.textContent = validArea.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validDose = validaInput(dose, 1, 1000, 'la dose');
      if (!validDose.valido) {
        output.textContent = validDose.messaggio;
        output.classList.add('error');
        return;
      }
      
      // Calcolo
      const mlTotali = mq * dose;
      
      // Risultato formattato
      let result = `üîπ Superficie: ${mq} m¬≤`;
      result += `\nüîπ Dose: ${dose} ml/m¬≤`;
      result += `\nüîπ Totale soluzione: ${mlTotali} ml`;
      
      if (mlTotali >= 1000) {
        result += ` (${(mlTotali/1000).toFixed(2)} L)`;
      }
      
      // Consigli pratici
      if (mlTotali > 5000) {
        result += `\n\n‚ö†Ô∏è Attenzione: Quantit√† elevata. Verificare la capacit√† dell'applicatore.`;
        output.classList.add('warning');
      } else {
        output.classList.add('success');
      }
      
      output.textContent = result;
      
      // Salva input
      salvaInput('mq', mq);
      salvaInput('dose', dose);
    }

    function calcolaFumigazione() {
      const output = document.getElementById('output-fumigazione');
      output.className = 'output';
      
      const mc = parseFloat(document.getElementById('mc').value);
      const doseFumo = parseFloat(document.getElementById('dose-fumo').value);
      
      // Validazione
      const validVolume = validaInput(mc, 1, 10000, 'il volume');
      if (!validVolume.valido) {
        output.textContent = validVolume.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validDose = validaInput(doseFumo, 1, 500, 'la dose');
      if (!validDose.valido) {
        output.textContent = validDose.messaggio;
        output.classList.add('error');
        return;
      }
      
      // Calcolo
      const mlTotali = mc * doseFumo;
      
      // Risultato formattato
      let result = `üîπ Volume: ${mc} m¬≥`;
      result += `\nüîπ Dose: ${doseFumo} ml/m¬≥`;
      result += `\nüîπ Quantit√† fumigante: ${mlTotali} ml`;
      
      if (mlTotali >= 1000) {
        result += ` (${(mlTotali/1000).toFixed(2)} L)`;
      }
      
      // Avviso di sicurezza
      if (mlTotali > 1000) {
        result += `\n\n‚ö†Ô∏è Importante: Assicurarsi che l'area sia adeguatamente ventilata e utilizzare dispositivi di protezione individuale.`;
        output.classList.add('warning');
      } else {
        output.classList.add('success');
      }
      
      output.textContent = result;
      
      // Salva input
      salvaInput('mc', mc);
      salvaInput('dose-fumo', doseFumo);
    }

    function calcolaCosti() {
      const output = document.getElementById('output-costi');
      output.className = 'output';
      
      const prezzo = parseFloat(document.getElementById('prezzo').value);
      const mlusati = parseFloat(document.getElementById('mlusati').value);
      
      // Validazione
      const validPrezzo = validaInput(prezzo, 0.01, 1000, 'il prezzo');
      if (!validPrezzo.valido) {
        output.textContent = validPrezzo.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validMl = validaInput(mlusati, 1, 100000, 'la quantit√† usata');
      if (!validMl.valido) {
        output.textContent = validMl.messaggio;
        output.classList.add('error');
        return;
      }
      
      // Calcoli
      const costoProdotto = (prezzo / 1000) * mlusati;
      
      // Risultato formattato
      let result = `üîπ Quantit√†: ${mlusati} ml`;
      result += `\nüîπ Prezzo al litro: ‚Ç¨${prezzo.toFixed(2)}`;
      result += `\nüîπ Costo prodotto: ‚Ç¨${costoProdotto.toFixed(2)}`;
      
      output.textContent = result;
      output.classList.add('success');
      
      // Salva input
      salvaInput('prezzo', prezzo);
      salvaInput('mlusati', mlusati);
    }
    
    function calcolaCostiCompleti() {
      const output = document.getElementById('output-costi');
      output.className = 'output';
      
      const prezzo = parseFloat(document.getElementById('prezzo-completo').value);
      const mlusati = parseFloat(document.getElementById('mlusati-completo').value);
      const manodopera = parseFloat(document.getElementById('manodopera').value) || 0;
      const tempo = parseFloat(document.getElementById('tempo').value) || 0;
      
      // Validazione
      const validPrezzo = validaInput(prezzo, 0.01, 1000, 'il prezzo');
      if (!validPrezzo.valido) {
        output.textContent = validPrezzo.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validMl = validaInput(mlusati, 1, 100000, 'la quantit√† usata');
      if (!validMl.valido) {
        output.textContent = validMl.messaggio;
        output.classList.add('error');
        return;
      }
      
      // Calcoli
      const costoProdotto = (prezzo / 1000) * mlusati;
      const costoManodopera = manodopera * tempo;
      const costoTotale = costoProdotto + costoManodopera;
      
      // Risultato formattato
      let result = `üîπ Costo prodotto: ‚Ç¨${costoProdotto.toFixed(2)}`;
      
      if (manodopera > 0 && tempo > 0) {
        result += `\nüîπ Manodopera (${tempo}h √ó ‚Ç¨${manodopera}/h): ‚Ç¨${costoManodopera.toFixed(2)}`;
        result += `\nüîπ Costo totale: ‚Ç¨${costoTotale.toFixed(2)}`;
      } else {
        result += `\nüîπ (Costo manodopera non incluso)`;
      }
      
      output.textContent = result;
      output.classList.add('success');
      
      // Salva input
      salvaInput('prezzo-completo', prezzo);
      salvaInput('mlusati-completo', mlusati);
      salvaInput('manodopera', manodopera);
      salvaInput('tempo', tempo);
    }

    function aggiungiProdotto() {
      const output = document.getElementById('output-prodotto');
      output.className = 'output';
      
      const nome = document.getElementById('nome-prodotto').value.trim();
      const concentrazione = parseFloat(document.getElementById('concentrazione-prodotto').value);
      const prezzo = parseFloat(document.getElementById('prezzo-prodotto').value);
      const tempoAzione = parseFloat(document.getElementById('tempo-azione').value);
      const tipoProdotto = document.getElementById('tipo-prodotto').value;
      
      // Validazione
      if (!nome) {
        output.textContent = 'Inserire il nome del prodotto';
        output.classList.add('error');
        return;
      }
      
      const validConc = validaInput(concentrazione, 0.1, 100, 'la concentrazione');
      if (!validConc.valido) {
        output.textContent = validConc.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validPrezzo = validaInput(prezzo, 0.01, 1000, 'il prezzo');
      if (!validPrezzo.valido) {
        output.textContent = validPrezzo.messaggio;
        output.classList.add('error');
        return;
      }
      
      const validTempo = validaInput(tempoAzione, 0.1, 100, 'il tempo di azione');
      if (!validTempo.valido) {
        output.textContent = validTempo.messaggio;
        output.classList.add('error');
        return;
      }
      
      if (!tipoProdotto) {
        output.textContent = 'Selezionare il tipo di prodotto';
        output.classList.add('error');
        return;
      }
      
      // Salvataggio nel localStorage
      const prodotti = JSON.parse(localStorage.getItem('prodotti')) || [];
      const nuovoProdotto = {
        id: Date.now(),
        nome,
        concentrazione,
        prezzo,
        tempoAzione,
        tipoProdotto,
        dataInserimento: new Date().toLocaleString()
      };
      
      prodotti.push(nuovoProdotto);
      localStorage.setItem('prodotti', JSON.stringify(prodotti));
      
      // Output
      output.textContent = `‚úÖ Prodotto "${nome}" salvato correttamente!`;
      output.classList.add('success');
      
      // Reset form
      document.getElementById('nome-prodotto').value = '';
      document.getElementById('concentrazione-prodotto').value = '';
      document.getElementById('prezzo-prodotto').value = '';
      document.getElementById('tempo-azione').value = '';
      document.getElementById('tipo-prodotto').value = '';
      
      // Salva input
      salvaInput('nome-prodotto', nome);
    }

    // ========== UTILITIES ========== //
    function salvaInput(id, valore) {
      localStorage.setItem(`pestcalc_${id}`, valore);
    }
    
    function caricaValoriSalvati() {
      document.querySelectorAll('input, select').forEach(el => {
        const savedValue = localStorage.getItem(`pestcalc_${el.id}`);
        if (savedValue !== null) {
          el.value = savedValue;
        }
      });
    }
    
    // ========== GESTIONE TABS ========== //
    function setupTabs() {
      const tabs = document.querySelectorAll('.tab');
      const contents = document.querySelectorAll('.calculator-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Rimuovi classe active da tutti
          tabs.forEach(t => t.classList.remove('active'));
          contents.forEach(c => c.classList.remove('active'));
          
          // Aggiungi classe active al tab cliccato
          tab.classList.add('active');
          
          // Mostra il contenuto corrispondente
          const tabId = tab.getAttribute('data-tab');
          document.getElementById(tabId).classList.add('active');
        });
      });
    }

    // ========== INIZIALIZZAZIONE ========== //
    document.addEventListener('DOMContentLoaded', () => {
      caricaValoriSalvati();
      setupTabs();
      
      // Carica prodotti salvati
      const prodottiSalvati = JSON.parse(localStorage.getItem('prodotti') || [];
      if (prodottiSalvati.length > 0) {
        console.log(`${prodottiSalvati.length} prodotti caricati dal localStorage`);
      }
      
      // Imposta il dominio nel footer
      const dominioElement = document.querySelector('.disclaimer:last-child');
      if (dominioElement) {
        dominioElement.textContent = `Dominio verificato: ${window.location.hostname}`;
      }
    });
  </script>
</body>
</html>
