<!-- Esempio di struttura HTML aggiornata per PestCalc Pro -->

<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PestCalc Pro</title>
  <link rel="stylesheet" href="styles.css">
  <!-- FontAwesome per le icone -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>
<body>
  <header class="app-header">
    <h1>PestCalc Pro</h1>
  </header>

  <main>
    <section id="main-menu" class="main-menu">
      <button onclick="showCalculator('dilution')">Calcolo Diluizione</button>
      <button onclick="showCalculator('saturation')">Saturazione Ambiente</button>
      <button onclick="showCalculator('fumigation')">Fumigazione</button>
      <button onclick="showCostCalculator()">Calcolo Costi</button>
      <button onclick="showProducts()">Gestisci Prodotti</button>
      <button onclick="showHistory()">Storico</button>
    </section>

    <!-- Calcolatore Diluizione -->
    <section id="dilution-calc" class="calculator-section">
      <h2>Diluizione</h2>
      <label for="product-select">Prodotto:</label>
      <select id="product-select"></select>
      <label for="dilution-percentage">Percentuale finale (%):</label>
      <input type="number" id="dilution-percentage" min="0.01" max="10" step="0.01" />
      <label for="solution-volume">Volume soluzione:</label>
      <input type="number" id="solution-volume" min="0.01" max="1000" step="0.01" />
      <select id="volume-unit">
        <option value="L">Litri</option>
        <option value="ml">Millilitri</option>
      </select>
      <button id="dilution-calc-btn" class="calculate-btn" onclick="calculateDilution()">
        <i class="fas fa-calculator"></i> Calcola Diluizione
      </button>
      <div id="dilution-result"></div>
      <button onclick="returnToPreviousSection()">Torna indietro</button>
    </section>

    <!-- Calcolatore Saturazione -->
    <section id="saturation-calc" class="calculator-section">
      <h2>Saturazione Ambientale</h2>
      <label for="saturation-product">Prodotto:</label>
      <select id="saturation-product"></select>
      <label for="room-area">Superficie (m²):</label>
      <input type="number" id="room-area" min="0.01" step="0.01" />
      <label for="room-height">Altezza (m):</label>
      <input type="number" id="room-height" min="0.01" max="20" step="0.01" />
      <span id="saturation-volume-display">0 m³</span>
      <button id="saturation-calc-btn" class="calculate-btn" onclick="calculateSaturation()">
        <i class="fas fa-calculator"></i> Calcola Saturazione
      </button>
      <div id="saturation-result"></div>
      <button onclick="returnToPreviousSection()">Torna indietro</button>
    </section>

    <!-- Calcolatore Fumigazione -->
    <section id="fumigation-calc" class="calculator-section">
      <h2>Fumigazione</h2>
      <label for="fumigant">Fumigante:</label>
      <select id="fumigant"></select>
      <label for="fumigation-type">Tipo di calcolo:</label>
      <select id="fumigation-type">
        <option value="volume">Per volume</option>
        <option value="weight">Per peso prodotto</option>
      </select>
      <div id="volume-inputs">
        <label for="fum-area">Superficie (m²):</label>
        <input type="number" id="fum-area" min="0.01" step="0.01" />
        <label for="fum-height">Altezza (m):</label>
        <input type="number" id="fum-height" min="0.01" max="20" step="0.01" />
      </div>
      <div id="weight-inputs" style="display:none;">
        <label for="product-weight">Peso prodotto (tonnellate):</label>
        <input type="number" id="product-weight" min="0.01" step="0.01" />
      </div>
      <span id="fumigation-volume-display">0 m³</span>
      <label for="exposure-time">Tempo esposizione (ore):</label>
      <input type="number" id="exposure-time" min="1" max="240" step="1" value="48" />
      <button id="fumigation-calc-btn" class="calculate-btn" onclick="calculateFumigation()">
        <i class="fas fa-calculator"></i> Calcola Fumigazione
      </button>
      <div id="fumigation-result"></div>
      <div id="timer-section" style="display:none;">
        <span id="timer-display">00:00:00</span>
        <button id="timer-btn" onclick="toggleTimer()" aria-label="Avvia/ferma timer">
          <i class="fas fa-play"></i> Avvia Timer
        </button>
      </div>
      <button onclick="returnToPreviousSection()">Torna indietro</button>
    </section>

    <!-- Calcolatore Costi -->
    <section id="cost-calc" class="calculator-section">
      <h2>Calcolo Costi</h2>
      <label for="cost-product">Prodotto:</label>
      <select id="cost-product"></select>
      <label for="cost-quantity">Quantità (ml):</label>
      <input type="number" id="cost-quantity" min="0.01" step="0.01" />
      <label for="cost-labor">Costo manodopera €/h:</label>
      <input type="number" id="cost-labor" min="0" step="1" value="35" />
      <label for="cost-time">Tempo (h):</label>
      <input type="number" id="cost-time" min="0" step="0.1" value="2" />
      <button id="cost-calc-btn" class="calculate-btn" onclick="calculateCost()">
        <i class="fas fa-calculator"></i> Calcola Costi
      </button>
      <div id="cost-result"></div>
      <button onclick="returnToPreviousSection()">Torna indietro</button>
    </section>

    <!-- Gestione Prodotti -->
    <section id="products-section" class="calculator-section">
      <h2>Prodotti Personalizzati</h2>
      <form onsubmit="addCustomProduct(); return false;">
        <input id="new-product-name" placeholder="Nome prodotto" required minlength="3" autocomplete="off"/>
        <select id="new-product-type" required>
          <option value="">Tipo...</option>
          <option value="insetticida">Insetticida</option>
          <option value="rodenticida">Rodenticida</option>
          <option value="fumigante">Fumigante</option>
          <option value="disinfettante">Disinfettante</option>
          <option value="altro">Altro</option>
        </select>
        <select id="new-product-formulation" required>
          <option value="">Formulazione...</option>
          <option value="liquido">Liquido</option>
          <option value="polvere">Polvere</option>
          <option value="granulare">Granulare</option>
          <option value="aerosol">Aerosol</option>
          <option value="gel">Gel</option>
        </select>
        <input type="number" id="new-product-concentration" min="0.01" max="100" step="0.01" placeholder="Concentrazione (%)" required />
        <input type="number" id="new-product-dilution" min="0.01" max="10" step="0.01" placeholder="Diluizione raccomandata (%)" required />
        <input type="number" id="new-product-price" min="0" step="0.01" placeholder="Prezzo €/L (opzionale)" />
        <input type="number" id="new-product-saturation-dose" min="0" step="0.01" placeholder="Dosaggio saturazione (ml/m³)" />
        <input type="number" id="new-product-fumigant-dose" min="0" step="0.01" placeholder="Dosaggio fumigazione (g/m³)" />
        <button id="add-product-btn" class="calculate-btn" type="submit">
          <i class="fas fa-plus"></i> Aggiungi Prodotto
        </button>
      </form>
      <div id="custom-products-list"></div>
      <button onclick="returnToPreviousSection()">Torna indietro</button>
    </section>

    <!-- Storico -->
    <section id="history-section" class="calculator-section">
      <h2>Storico Calcoli</h2>
      <input id="search-history" oninput="filterHistory()" placeholder="Cerca nello storico..." aria-label="Cerca nello storico" />
      <button onclick="exportHistory()">Esporta PDF</button>
      <button onclick="clearHistory()">Svuota storico</button>
      <div id="history-list"></div>
      <button onclick="returnToPreviousSection()">Torna indietro</button>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
